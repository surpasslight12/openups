# OpenUPS 文档组织规范

本文档定义 OpenUPS 项目的文档结构、职责分工和生成规则，避免内容重复和混乱。

## 📁 文档结构

```
openups/
├── README.md                    # 项目主页（面向用户）
├── QUICKSTART.md                # 快速上手指南（5-10分钟）
├── CONTRIBUTING.md              # 贡献指南（面向开发者）
├── CHANGELOG.md                 # 版本更新日志
├── LICENSE                      # MIT 许可证
│
├── .github/
│   ├── copilot-instructions.md  # AI 编码助手指导（面向 AI）
│   └── DOCUMENTATION.md         # 本文档（文档规范）
│
├── .cursorrules                 # AI 编码规范（面向 Cursor AI）
│
└── docs/
    ├── README.md                # 文档索引和导航
    ├── ARCHITECTURE.md          # 架构设计详解（技术深度）
    ├── DEPLOYMENT.md            # 部署和运维指南
    └── DEVELOPMENT.md           # 开发者详细指南
```

## 📝 文档职责划分

### 根目录文档（用户导向）

#### README.md - 项目主页
**目标受众**: 首次访问的用户、潜在用户  
**内容范围**:
- ✅ 项目简介和核心特性（3-5 条亮点）
- ✅ 快速开始（< 10 行代码）
- ✅ 基本使用示例（3-5 个场景）
- ✅ 配置参数表格（完整列表）
- ✅ 安全特性说明
- ✅ 文档导航链接
- ❌ 不包含：详细架构、完整部署流程、开发指南

**更新频率**: 每个版本发布时  
**行数限制**: 250-300 行

#### QUICKSTART.md - 快速上手
**目标受众**: 想要立即使用的用户  
**内容范围**:
- ✅ 5 分钟快速上手（3 步）
- ✅ 常用场景示例（5-8 个）
- ✅ systemd 服务部署（分步指南）
- ✅ 常见问题排查（FAQ）
- ✅ 监控和调试技巧
- ❌ 不包含：架构细节、开发流程、贡献指南

**更新频率**: 功能变更或常见问题更新  
**行数限制**: 300-350 行

#### CONTRIBUTING.md - 贡献指南
**目标受众**: 想要贡献代码的开发者  
**内容范围**:
- ✅ 开发环境设置
- ✅ 代码规范（命名、风格）
- ✅ 提交流程（分支、PR）
- ✅ 测试要求
- ❌ 不包含：详细架构、用户使用指南

**更新频率**: 开发流程变更时  
**行数限制**: 250-300 行

#### CHANGELOG.md - 版本日志
**目标受众**: 所有用户  
**内容范围**:
- ✅ 版本号和日期
- ✅ 新增功能、修复、优化
- ✅ 破坏性变更（Breaking Changes）
- ✅ 迁移指南（如需要）
- ❌ 不包含：详细技术实现

**更新频率**: 每次版本发布  
**格式**: 遵循 Keep a Changelog 规范

### .github/ 目录（AI 和协作）

#### copilot-instructions.md - AI 编码指导
**目标受众**: GitHub Copilot 和其他 AI 助手  
**内容范围**:
- ✅ 项目架构概览（模块依赖）
- ✅ 编码规范（命名、安全）
- ✅ 关键系统使用方法
- ✅ 开发工作流（编译、测试）
- ✅ 常见任务模式
- ✅ 版本关键变更
- ❌ 不包含：用户使用指南、详细文档

**更新频率**: 架构变更或重大功能更新  
**行数限制**: 300-400 行

#### DOCUMENTATION.md - 文档规范
**目标受众**: 文档维护者、AI 文档生成器  
**内容范围**:
- ✅ 文档结构定义
- ✅ 各文档职责边界
- ✅ 文档生成规则
- ✅ 禁止事项清单
- ❌ 不包含：技术内容

**更新频率**: 文档组织变更时  
**行数限制**: 150-200 行

### docs/ 目录（技术深度）

#### docs/README.md - 文档索引
**目标受众**: 寻找特定文档的用户  
**内容范围**:
- ✅ 所有文档列表和简介
- ✅ 文档选择指南
- ✅ 外部资源链接
- ❌ 不包含：重复的技术内容

**更新频率**: 添加新文档时  
**行数限制**: 50-100 行

#### docs/ARCHITECTURE.md - 架构设计
**目标受众**: 深度理解项目的开发者  
**内容范围**:
- ✅ 模块详细设计
- ✅ 依赖关系图
- ✅ 数据流和控制流
- ✅ 关键算法实现
- ✅ 扩展指南
- ❌ 不包含：用户使用、部署步骤

**更新频率**: 架构变更时  
**行数限制**: 350-400 行

#### docs/DEPLOYMENT.md - 部署运维
**目标受众**: 系统管理员、运维人员  
**内容范围**:
- ✅ 生产环境部署
- ✅ systemd 服务配置详解
- ✅ 安全加固措施
- ✅ 性能调优
- ✅ 监控和日志分析
- ✅ 备份和恢复
- ❌ 不包含：开发指南、代码细节

**更新频率**: 部署方式变更时  
**行数限制**: 300-350 行  
**状态**: 🆕 待创建

#### docs/DEVELOPMENT.md - 开发详解
**目标受众**: 核心开发者  
**内容范围**:
- ✅ 完整的开发环境配置
- ✅ 代码结构详解
- ✅ 调试技巧和工具
- ✅ 性能分析
- ✅ 单元测试编写
- ✅ CI/CD 配置
- ❌ 不包含：用户使用、基础架构

**更新频率**: 开发工具或流程变更  
**行数限制**: 350-400 行  
**状态**: 🆕 待创建

## 🚫 文档生成禁止事项

### 1. 禁止生成重复文档
- ❌ 不要创建 `USAGE.md`（内容已在 QUICKSTART.md）
- ❌ 不要创建 `SETUP.md`（内容已在 README.md + QUICKSTART.md）
- ❌ 不要创建 `API.md`（C 项目无 API 文档需求，详见代码注释）
- ❌ 不要创建 `TESTING.md`（内容已在 CONTRIBUTING.md）
- ❌ 不要创建独立的 `SECURITY.md`（内容已在 README.md + docs/DEPLOYMENT.md）

### 2. 禁止在根目录创建技术文档
- ❌ 技术深度文档必须放在 `docs/` 目录
- ❌ 临时报告文档（如 `*_REPORT.md`）只能在 `docs/` 目录
- ✅ 根目录只保留：README、QUICKSTART、CONTRIBUTING、CHANGELOG、LICENSE

### 3. 禁止创建版本化文档
- ❌ 不要创建 `README_v1.0.md`、`GUIDE_2025.md` 等
- ✅ 使用 Git 历史记录和 CHANGELOG.md 追踪变更

### 4. 禁止多语言文档（当前阶段）
- ❌ 不要创建 `README_EN.md`、`README_ZH.md`
- ✅ 当前所有文档使用中文
- 📝 未来如需多语言支持，使用 `docs/i18n/` 目录

## 📋 文档生成规则

### AI 文档生成器必须遵守的规则

#### 规则 1: 检查现有文档
在生成任何新文档前，必须：
1. 检查 `docs/README.md` 查看现有文档列表
2. 检查目标文档是否已存在
3. 检查内容是否与现有文档重复

#### 规则 2: 确定文档位置
根据内容类型确定位置：
- **用户向导** → 根目录（README.md、QUICKSTART.md）
- **开发向导** → 根目录（CONTRIBUTING.md）
- **技术深度** → docs/ 目录
- **AI 指导** → .github/ 目录或 .cursorrules
- **临时报告** → docs/ 目录（需标注 TEMP）

#### 规则 3: 遵守行数限制
- 用户文档：250-350 行
- 技术文档：350-400 行
- AI 指导：300-400 行
- 索引文档：50-100 行

超出限制应拆分为多个文档。

#### 规则 4: 更新索引
创建新文档后必须更新：
- `docs/README.md` - 添加到文档列表
- 根目录 `README.md` - 更新文档导航链接

#### 规则 5: 标注文档元信息
每个文档顶部应包含：
```markdown
# 文档标题

**版本**: v1.x.x
**更新日期**: YYYY-MM-DD
**目标受众**: [用户/开发者/运维/AI]
**状态**: [稳定/开发中/已废弃]
```

## 🔄 文档维护流程

### 何时更新文档

| 变更类型 | 需要更新的文档 |
|---------|--------------|
| 新增功能 | README.md, QUICKSTART.md, CHANGELOG.md, copilot-instructions.md |
| 修复 Bug | CHANGELOG.md |
| 架构变更 | docs/ARCHITECTURE.md, copilot-instructions.md, CHANGELOG.md |
| 配置变更 | README.md, QUICKSTART.md, docs/DEPLOYMENT.md |
| 部署变更 | QUICKSTART.md, docs/DEPLOYMENT.md |
| 开发流程变更 | CONTRIBUTING.md, docs/DEVELOPMENT.md |
| API 变更 | 代码注释, copilot-instructions.md |

### 文档一致性检查
定期检查（每个版本发布前）：
- [ ] 所有示例代码可运行
- [ ] 版本号一致
- [ ] 配置参数表格完整
- [ ] 链接有效
- [ ] 无内容重复

## 📊 当前文档清理计划

### 需要移除/重组的文档

1. **docs/PROJECT_STATUS.md** (412 行)
   - ❌ 问题：大量内容与其他文档重复
   - ✅ 方案：
     - 提取"v1.1.0 更新摘要" → 合并到 CHANGELOG.md
     - 提取"配置系统" → 已在 README.md
     - 提取"安全特性" → 已在 README.md
     - 提取"性能指标" → 合并到 docs/ARCHITECTURE.md
     - 删除此文件

2. **docs/C23_IMPROVEMENTS.md** (298 行)
   - ❌ 问题：临时技术报告，已不再需要
   - ✅ 方案：
     - 归档到 `docs/archive/` 或删除
     - 关键内容已体现在代码中

### 需要创建的文档

1. **docs/DEPLOYMENT.md** - 部署运维指南
   - 从 QUICKSTART.md 提取 systemd 详细配置
   - 添加生产环境最佳实践
   - 添加监控和日志分析

2. **docs/DEVELOPMENT.md** - 开发详解
   - 从 CONTRIBUTING.md 提取开发环境详细配置
   - 添加调试技巧
   - 添加性能分析方法

## ✅ 检查清单

文档维护者在创建/修改文档时应检查：

- [ ] 内容是否符合目标受众？
- [ ] 是否与现有文档重复？
- [ ] 文档位置是否正确？
- [ ] 行数是否在限制范围内？
- [ ] 是否更新了 docs/README.md？
- [ ] 是否更新了相关链接？
- [ ] 示例代码是否可运行？
- [ ] 是否标注了元信息？

---

**维护者**: OpenUPS 项目团队  
**最后更新**: 2025-11-01  
**版本**: 1.0
