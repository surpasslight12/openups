# Changelog

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.0.0] - 2025-10-26

### 🎉 首次发布

#### Added
- ✨ **完整的 C 语言实现**
  - 从 openups_cpp 项目移植的所有核心功能
  - 7 个模块化组件，职责清晰
  
- 🌐 **原生 ICMP 实现**
  - 支持 IPv4 和 IPv6
  - 使用 raw socket，无需依赖系统 ping 命令
  - 手动计算 ICMP 校验和（IPv4）
  - 微秒级延迟测量
  
- ⚙️ **systemd 深度集成**
  - sd_notify 支持（服务就绪通知）
  - Watchdog 心跳机制
  - 状态更新通知
  - 支持抽象命名空间的 UNIX socket
  
- 📝 **结构化日志系统**
  - 支持 DEBUG/INFO/WARN/ERROR 级别
  - 键值对格式的结构化日志
  - 可选的 syslog 输出
  - 时间戳可配置
  
- 🔧 **灵活的配置系统**
  - 命令行参数解析（使用 getopt_long）
  - 环境变量支持
  - 配置优先级：CLI > 环境变量 > 默认值
  - 完整的配置验证
  
- 🛡️ **四种关机模式**
  - `immediate`: 立即关机
  - `delayed`: 延迟关机（可配置延迟时间）
  - `log-only`: 仅记录日志，不执行关机
  - `custom`: 执行自定义脚本
  
- 📊 **实时监控指标**
  - 总 ping 次数、成功/失败次数
  - 最小/最大/平均延迟
  - 成功率统计
  - 运行时长追踪
  
- 🔒 **安全特性**
  - 最小权限运行（CAP_NET_RAW）
  - Dry-run 模式默认启用
  - 输入验证和清理
  - 避免缓冲区溢出
  
- 🛠️ **开发工具**
  - Makefile 构建系统
  - systemd 服务文件和安装/卸载脚本
  - 完整的文档（README、ARCHITECTURE）
  
#### Technical Details
- **语言**：C11 标准
- **依赖**：零第三方依赖，仅使用标准库和 Linux 系统调用
- **代码量**：约 1500 行 C 代码
- **模块**：7 个独立模块
- **内存占用**：< 5 MB
- **二进制大小**：~50 KB（优化编译）

---

## 待办事项

### 未来计划
- [ ] 添加 CMake 构建系统支持
- [ ] 支持更多的网络协议（TCP/UDP）
- [ ] Web 界面或 REST API
- [ ] 配置文件支持（YAML/JSON）
- [ ] 性能优化和基准测试
- [ ] 单元测试框架
- [ ] CI/CD 集成

### 已知问题
- strncpy 警告（-Wstringop-truncation）：非关键问题，计划在未来版本中改用更安全的函数

---

**格式说明**：
- 🎉 首次发布/重大更新
- ✨ 新功能
- 🌐 网络相关
- ⚙️ 系统集成
- 📝 文档
- 🔧 配置
- 🛡️ 安全
- 📊 监控
- 🔒 安全加固
- 🛠️ 工具
- 🐛 Bug 修复
- ⚡ 性能优化
- 🔥 移除功能
- 📚 文档更新
